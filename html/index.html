<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ブログ｜現在開発中</title>
    </head>
    <body>
        <script src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.js"></script>
        <script>
            let systems = [];
            
            function setup() {
                createCanvas(windowWidth, windowHeight);
                for (var i = 0; i < 10; ++i) {
                    p = new ParticleSystem(createVector(i * windowWidth / 10 + 50, windowHeight / 10 + i % 3 * (windowHeight / 5)));
                    systems.push(p);
                }
            }

            function windowResized() {
                resizeCanvas(windowWidth, windowHeight);
            }

            function draw() {
                background(51);
                background(0);
                for (i = 0; i < systems.length; i++) {
                    systems[i].run();
                    systems[i].addParticle();
                }
                fill(255);
                textAlign(CENTER);
                textSize(32);
                text("現在開発中です", width / 2, height / 2 - 50);
                textSize(24);
                text("もうしばらくお待ちください", width / 2, height / 2 + 50);
            }

            // A simple Particle class
            let Particle = function(position) {
                this.acceleration = createVector(0, 0.05);
                this.velocity = createVector(random(-1, 1), random(-1, 0));
                this.position = position.copy();
                this.lifespan = 255;
            };

            Particle.prototype.run = function() {
                this.update();
                this.display();
            };

            // Method to update position
            Particle.prototype.update = function(){
                this.velocity.add(this.acceleration);
                this.position.add(this.velocity);
                this.lifespan -= 2;
            };

            // Method to display
            Particle.prototype.display = function() {
                stroke(200, this.lifespan);
                strokeWeight(2);
                fill(127, this.lifespan);
                ellipse(this.position.x, this.position.y, 12, 12);
            };

            // Is the particle still useful?
            Particle.prototype.isDead = function(){
                return this.lifespan < 0;
            };

            let ParticleSystem = function(position) {
                this.origin = position.copy();
                this.particles = [];
            };

            ParticleSystem.prototype.addParticle = function() {
                this.particles.push(new Particle(this.origin));
            };

            ParticleSystem.prototype.run = function() {
                for (let i = this.particles.length-1; i >= 0; i--) {
                    let p = this.particles[i];
                    p.run();
                    if (p.isDead()) {
                        this.particles.splice(i, 1);
                    }
                }
            };
        </script>
    </body>
</html>